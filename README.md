# Internships App (MVC Demo)

This repository hosts a simple PHP/MySQL demo implementing an internship platform using a tiny MVC structure.  
It originally contained user management; we've now added **company management** to fulfill the SFx requirements:

## New "Gestion des entreprises" Features

The following capabilities have been implemented as of February 2026:

1. **Rechercher et afficher une entreprise** (SFx2)
   - Accessible à tous les utilisateurs (public/session).
   - Search by name, email, phone or description.
   - Results include number of applicants and average rating.
   - Detail page shows associated offers and evaluations.

2. **Créer une entreprise** (SFx3)
   - Only `recruiter` and `admin` roles may create.
   - Data fields: name, description, contact email, phone.

3. **Modifier une entreprise** (SFx4)
   - Only `recruiter` and `admin` roles may edit.
   - Editing UI available from list or detail view.

4. **Évaluer une entreprise** (SFx5)
   - Only `student` role may add ratings.
   - Ratings stored with optional comment; average displayed.

5. **Supprimer une entreprise** (SFx6)
   - Only `recruiter` and `admin` roles may delete.
   - Deletion cascades to offers, applications, evaluations.

## Data Model Additions

`db/init.sql` now creates several new tables:

- `companies`
- `offers` (internship postings)
- `applications` (student responses)
- `company_evaluations` (ratings/comments)

Sample data is inserted for demonstration.

## How to Try

1. Run `setup_db.php` via your browser to apply the schema changes and seed data.
2. Use `companies.php` to view/search companies.
3. Log in using the demo credentials (see users table or `script.js`):
   - student@example.com / password123 (student)
   - recruiter@example.com / password123 (recruiter)
   - admin@example.com / password123 (admin)
4. Perform create/edit/delete operations depending on your role.
5. On a company detail page you can add an evaluation (students only).

The existing `users.php` controller allows Ajax login and stores a session for authorization.

## Notes

- The MVC files for companies reside in `mvc/models/CompanyModel.php`, `mvc/controllers/CompanyController.php`, and views under `mvc/views/`.
- Front controllers `users.php` and `companies.php` serve as entry points.
- The static `index.html` has been patched to link to `/companies.php` in the navigation.
- This demo does not yet implement comprehensive authentication flows; sessions are minimal and used for role checks only.

Feel free to extend further with application management, role-based UI, and API endpoints.

---

_Generated by GitHub Copilot (Raptor mini)._
